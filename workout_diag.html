<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Horizon V38 (Light Mode)</title>
    
    <script>
        function rawLog(msg, type='info') {
            const el = document.getElementById('debug-console');
            if(el) {
                const ln = document.createElement('div');
                const ts = new Date().toLocaleTimeString().split(' ')[0];
                ln.textContent = `[${ts}] ${msg}`;
                if(type==='err') ln.className = 'log-err';
                if(type==='tx') ln.className = 'log-tx';
                if(type==='succ') ln.className = 'log-succ';
                el.appendChild(ln);
                el.scrollTop = el.scrollHeight;
            }
        }
        window.onerror = function(msg, url, line) {
            rawLog(`CRASH: ${msg} (L${line})`, 'err');
        };
    </script>

    <style>
        /* --- CHANGED TO LIGHT THEME --- */
        :root {
            --bg: #ffffff;           /* White Background */
            --sidebar: #f1f5f9;      /* Light Gray Sidebar */
            --surface: #e2e8f0;      /* Darker Gray Cards */
            --primary: #2563eb;      /* Darker Blue for visibility */
            --text: #0f172a;         /* Dark Black Text */
            --text-muted: #475569;   /* Muted Text */
            
            /* Metric Colors (Darker for white bg) */
            --c-rpm: #059669; 
            --c-pwr: #d97706; 
            --c-spd: #0891b2; 
            --c-res: #db2777;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg); color: var(--text);
            margin: 0; padding: 0; height: 100vh; display: flex; overflow: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* Console (Keep dark for contrast) */
        #debug-console {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 160px;
            background: #000; color: #0f0; border-top: 2px solid #555; /* Matrix Green */
            font-size: 12px; padding: 10px; overflow-y: scroll; font-family: monospace;
            z-index: 99999; box-sizing: border-box; white-space: pre-wrap;
        }
        .log-err { color: #ff5555; font-weight: bold; }
        .log-tx { color: #ffff55; } 
        .log-succ { color: #55ff55; } 

        /* Layout */
        .app-container { display: flex; width: 100%; height: 100%; }
        
        .sidebar {
            width: 320px; background: var(--sidebar); padding: 20px; 
            display: flex; flex-direction: column; border-right: 1px solid #cbd5e1;
            flex-shrink: 0; overflow-y: auto;
            padding-bottom: 180px; 
        }
        
        .content {
            flex: 1; padding: 20px; overflow-y: auto; position: relative;
            display: flex; flex-direction: column; align-items: center;
            padding-bottom: 220px; 
        }

        @media (max-width: 820px) {
            .app-container { flex-direction: column; }
            .sidebar { width: 100%; border-right: none; height: auto; flex-shrink: 0; padding-bottom: 20px; }
            .content { width: 100%; box-sizing: border-box; }
        }

        /* UI */
        .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .mini-card { background: var(--surface); padding: 10px; border-radius: 12px; text-align: center; border: 1px solid #cbd5e1; }
        .mini-val { font-size: 24px; font-weight: 800; }
        .mini-lbl { font-size: 10px; color: var(--text-muted); font-weight: bold; }
        .c-rpm { color: var(--c-rpm); } .c-pwr { color: var(--c-pwr); } 
        .c-spd { color: var(--c-spd); } .c-res { color: var(--c-res); }

        .main-btn {
            width: 100%; padding: 15px; margin-bottom: 10px; border-radius: 10px; border: none; 
            font-weight: bold; font-size: 16px; color: white; cursor: pointer;
        }
        .btn-connect { background: var(--primary); }
        .btn-start { background: #059669; }
        .btn-stop { background: #dc2626; }
        
        .jump-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .btn-jump { flex: 1; background: #cbd5e1; color: #333; border: none; padding: 12px; border-radius: 8px; font-weight:bold; }

        .chart-box {
            width: 100%; max-width: 600px; height: 200px; 
            background: #ffffff; border: 2px solid #cbd5e1; border-radius: 12px; margin-bottom: 20px;
            flex-shrink: 0; 
        }
        canvas { width: 100%; height: 100%; display: block; }

        .global-timer { font-size: 48px; font-weight: bold; margin-bottom: 5px; color: #000; }
        
        .phase-list { width: 100%; max-width: 500px; display: flex; flex-direction: column; gap: 10px; }
        .phase-card { background: #ffffff; padding: 15px; border-radius: 12px; border: 1px solid #cbd5e1; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .phase-card.active { border-color: var(--primary); background: #eff6ff; border-width: 2px; }
        .phase-header { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: bold; }
        
        .controls-row { display: flex; gap: 10px; }
        .control-group { background: #f1f5f9; padding: 5px; border-radius: 8px; flex: 1; display: flex; justify-content: space-between; align-items: center; border: 1px solid #e2e8f0; }
        .ctrl-btn { width: 30px
